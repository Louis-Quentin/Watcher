{"ast":null,"code":"var _jsxFileName = \"/home/alouis-quentin/Watcher/src/front/src/Map.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { GoogleMap, Marker, useLoadScript } from '@react-google-maps/api';\nimport styles from './css/Map.module.css'; // Adjust the path as necessary\nimport MapSettings from \"./MapSettings\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '100vh'\n};\nconst defaultCenter = {\n  lat: -3.745,\n  lng: -38.523\n};\nconst MapComponent = () => {\n  _s();\n  const [currentPosition, setCurrentPosition] = useState(defaultCenter);\n  const [error, setError] = useState(null);\n  const {\n    isLoaded,\n    loadError\n  } = useLoadScript({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY || ''\n  });\n  const [retailers, setRetailers] = useState([]);\n  const requestLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        setCurrentPosition({\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        });\n        setError(null);\n        //if (currentPosition.lat != defaultCenter.lat && currentPosition.lng != defaultCenter.lng) {\n        fetchNearbyRetailers(position.coords.latitude, position.coords.longitude);\n        //}\n      }, error => {\n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            setError('User denied the request for Geolocation.');\n            break;\n          case error.POSITION_UNAVAILABLE:\n            setError('Location information is unavailable.');\n            break;\n          case error.TIMEOUT:\n            setError('The request to get user location timed out.');\n            break;\n          default:\n            setError('An unknown error occurred.');\n            break;\n        }\n      }, {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      });\n    } else {\n      setError('Geolocation is not supported by this browser.');\n    }\n  };\n  useEffect(() => {\n    requestLocation();\n  }, []);\n  const fetchNearbyRetailers = async (latitude, longitude) => {\n    const apiUrl = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${latitude},${longitude}&radius=5000&type=store&keyword=watch&key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`;\n    try {\n      const response = await axios.get(apiUrl);\n      setRetailers(response.data.results);\n      console.log(\"RESPONSE RETAILERS: \");\n      console.log(response.data.result);\n    } catch (error) {\n      console.error('Error fetching retailers:', error);\n    }\n  };\n  if (loadError) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Error loading maps\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isLoaded) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading Maps...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.errorMessage,\n        children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: requestLocation,\n          className: styles.retryButton,\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MapSettings, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GoogleMap, {\n      mapContainerStyle: containerStyle,\n      center: currentPosition,\n      zoom: 6,\n      children: /*#__PURE__*/_jsxDEV(Marker, {\n        position: currentPosition\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: styles.storesContainer,\n      children: retailers.map(retailer => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: retailer.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: retailer.vicinity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this)]\n      }, retailer.place_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(MapComponent, \"Y6Lj8IwLy3YT1wZ6o70ZBqfa9Us=\", false, function () {\n  return [useLoadScript];\n});\n_c = MapComponent;\nexport default MapComponent;\nvar _c;\n$RefreshReg$(_c, \"MapComponent\");","map":{"version":3,"names":["React","useState","useEffect","GoogleMap","Marker","useLoadScript","styles","MapSettings","axios","jsxDEV","_jsxDEV","containerStyle","width","height","defaultCenter","lat","lng","MapComponent","_s","currentPosition","setCurrentPosition","error","setError","isLoaded","loadError","googleMapsApiKey","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","retailers","setRetailers","requestLocation","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","fetchNearbyRetailers","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","enableHighAccuracy","timeout","maximumAge","apiUrl","response","get","data","results","console","log","result","children","fileName","_jsxFileName","lineNumber","columnNumber","className","container","errorMessage","onClick","retryButton","mapContainerStyle","center","zoom","storesContainer","map","retailer","name","vicinity","place_id","_c","$RefreshReg$"],"sources":["/home/alouis-quentin/Watcher/src/front/src/Map.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { GoogleMap, Marker, useLoadScript } from '@react-google-maps/api';\nimport styles from './css/Map.module.css'; // Adjust the path as necessary\nimport MapSettings from \"./MapSettings\"\nimport axios from 'axios';\n\nconst containerStyle = {\n  width: '100%',\n  height: '100vh',\n};\n\nconst defaultCenter = {\n  lat: -3.745,\n  lng: -38.523,\n};\n\nconst MapComponent: React.FC = () => {\n  const [currentPosition, setCurrentPosition] = useState(defaultCenter);\n  const [error, setError] = useState<string | null>(null);\n  const { isLoaded, loadError } = useLoadScript({\n    googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY || '',\n  });\n  const [retailers, setRetailers] = useState<any[]>([]);\n\n  const requestLocation = () => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setCurrentPosition({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          });\n          setError(null);\n          //if (currentPosition.lat != defaultCenter.lat && currentPosition.lng != defaultCenter.lng) {\n          fetchNearbyRetailers(position.coords.latitude, position.coords.longitude);\n          //}\n        },\n        (error) => {\n          switch (error.code) {\n            case error.PERMISSION_DENIED:\n              setError('User denied the request for Geolocation.');\n              break;\n            case error.POSITION_UNAVAILABLE:\n              setError('Location information is unavailable.');\n              break;\n            case error.TIMEOUT:\n              setError('The request to get user location timed out.');\n              break;\n            default:\n              setError('An unknown error occurred.');\n              break;\n          }\n        },\n        { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }\n      );\n    } else {\n      setError('Geolocation is not supported by this browser.');\n    }\n  };\n\n  useEffect(() => {\n    requestLocation();\n  }, []);\n\n  const fetchNearbyRetailers = async (latitude, longitude) => {\n    const apiUrl = `https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=${latitude},${longitude}&radius=5000&type=store&keyword=watch&key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}`;\n    try {\n      const response = await axios.get(apiUrl);\n      setRetailers(response.data.results);\n      console.log(\"RESPONSE RETAILERS: \");\n      console.log(response.data.result);\n  } catch (error) {\n      console.error('Error fetching retailers:', error);\n  }\n  }\n\n  if (loadError) {\n    return <div>Error loading maps</div>;\n  }\n\n  if (!isLoaded) {\n    return <div>Loading Maps...</div>;\n  }\n\n  return (\n    <div >\n      <div className={styles.container}>\n      {error && (\n        <div className={styles.errorMessage}>\n          {error}\n          <button onClick={requestLocation} className={styles.retryButton}>\n            Retry\n          </button>\n        </div>\n        \n      )}\n      </div>\n      <MapSettings/>\n      <GoogleMap mapContainerStyle={containerStyle} center={currentPosition} zoom={6}>\n        <Marker position={currentPosition} />\n      </GoogleMap>\n      <ul className={styles.storesContainer}>\n                {retailers.map((retailer) => (\n                    <li key={retailer.place_id}>\n                        <h3>{retailer.name}</h3>\n                        <p>{retailer.vicinity}</p>\n                    </li>\n                ))}\n            </ul>\n      \n    </div>\n  );\n};\n\nexport default MapComponent;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,MAAM,EAAEC,aAAa,QAAQ,wBAAwB;AACzE,OAAOC,MAAM,MAAM,sBAAsB,CAAC,CAAC;AAC3C,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,cAAc,GAAG;EACrBC,KAAK,EAAE,MAAM;EACbC,MAAM,EAAE;AACV,CAAC;AAED,MAAMC,aAAa,GAAG;EACpBC,GAAG,EAAE,CAAC,KAAK;EACXC,GAAG,EAAE,CAAC;AACR,CAAC;AAED,MAAMC,YAAsB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACnC,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGnB,QAAQ,CAACa,aAAa,CAAC;EACrE,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGrB,QAAQ,CAAgB,IAAI,CAAC;EACvD,MAAM;IAAEsB,QAAQ;IAAEC;EAAU,CAAC,GAAGnB,aAAa,CAAC;IAC5CoB,gBAAgB,EAAEC,OAAO,CAACC,GAAG,CAACC,6BAA6B,IAAI;EACjE,CAAC,CAAC;EACF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG7B,QAAQ,CAAQ,EAAE,CAAC;EAErD,MAAM8B,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAIC,SAAS,CAACC,WAAW,EAAE;MACzBD,SAAS,CAACC,WAAW,CAACC,kBAAkB,CACrCC,QAAQ,IAAK;QACZf,kBAAkB,CAAC;UACjBL,GAAG,EAAEoB,QAAQ,CAACC,MAAM,CAACC,QAAQ;UAC7BrB,GAAG,EAAEmB,QAAQ,CAACC,MAAM,CAACE;QACvB,CAAC,CAAC;QACFhB,QAAQ,CAAC,IAAI,CAAC;QACd;QACAiB,oBAAoB,CAACJ,QAAQ,CAACC,MAAM,CAACC,QAAQ,EAAEF,QAAQ,CAACC,MAAM,CAACE,SAAS,CAAC;QACzE;MACF,CAAC,EACAjB,KAAK,IAAK;QACT,QAAQA,KAAK,CAACmB,IAAI;UAChB,KAAKnB,KAAK,CAACoB,iBAAiB;YAC1BnB,QAAQ,CAAC,0CAA0C,CAAC;YACpD;UACF,KAAKD,KAAK,CAACqB,oBAAoB;YAC7BpB,QAAQ,CAAC,sCAAsC,CAAC;YAChD;UACF,KAAKD,KAAK,CAACsB,OAAO;YAChBrB,QAAQ,CAAC,6CAA6C,CAAC;YACvD;UACF;YACEA,QAAQ,CAAC,4BAA4B,CAAC;YACtC;QACJ;MACF,CAAC,EACD;QAAEsB,kBAAkB,EAAE,IAAI;QAAEC,OAAO,EAAE,IAAI;QAAEC,UAAU,EAAE;MAAE,CAC3D,CAAC;IACH,CAAC,MAAM;MACLxB,QAAQ,CAAC,+CAA+C,CAAC;IAC3D;EACF,CAAC;EAEDpB,SAAS,CAAC,MAAM;IACd6B,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,oBAAoB,GAAG,MAAAA,CAAOF,QAAQ,EAAEC,SAAS,KAAK;IAC1D,MAAMS,MAAM,GAAI,yEAAwEV,QAAS,IAAGC,SAAU,6CAA4CZ,OAAO,CAACC,GAAG,CAACC,6BAA8B,EAAC;IACrM,IAAI;MACF,MAAMoB,QAAQ,GAAG,MAAMxC,KAAK,CAACyC,GAAG,CAACF,MAAM,CAAC;MACxCjB,YAAY,CAACkB,QAAQ,CAACE,IAAI,CAACC,OAAO,CAAC;MACnCC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MACnCD,OAAO,CAACC,GAAG,CAACL,QAAQ,CAACE,IAAI,CAACI,MAAM,CAAC;IACrC,CAAC,CAAC,OAAOjC,KAAK,EAAE;MACZ+B,OAAO,CAAC/B,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;IACrD;EACA,CAAC;EAED,IAAIG,SAAS,EAAE;IACb,oBAAOd,OAAA;MAAA6C,QAAA,EAAK;IAAkB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACtC;EAEA,IAAI,CAACpC,QAAQ,EAAE;IACb,oBAAOb,OAAA;MAAA6C,QAAA,EAAK;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACnC;EAEA,oBACEjD,OAAA;IAAA6C,QAAA,gBACE7C,OAAA;MAAKkD,SAAS,EAAEtD,MAAM,CAACuD,SAAU;MAAAN,QAAA,EAChClC,KAAK,iBACJX,OAAA;QAAKkD,SAAS,EAAEtD,MAAM,CAACwD,YAAa;QAAAP,QAAA,GACjClC,KAAK,eACNX,OAAA;UAAQqD,OAAO,EAAEhC,eAAgB;UAAC6B,SAAS,EAAEtD,MAAM,CAAC0D,WAAY;UAAAT,QAAA,EAAC;QAEjE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAEN;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC,eACNjD,OAAA,CAACH,WAAW;MAAAiD,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,eACdjD,OAAA,CAACP,SAAS;MAAC8D,iBAAiB,EAAEtD,cAAe;MAACuD,MAAM,EAAE/C,eAAgB;MAACgD,IAAI,EAAE,CAAE;MAAAZ,QAAA,eAC7E7C,OAAA,CAACN,MAAM;QAAC+B,QAAQ,EAAEhB;MAAgB;QAAAqC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CAAC,eACZjD,OAAA;MAAIkD,SAAS,EAAEtD,MAAM,CAAC8D,eAAgB;MAAAb,QAAA,EAC3B1B,SAAS,CAACwC,GAAG,CAAEC,QAAQ,iBACpB5D,OAAA;QAAA6C,QAAA,gBACI7C,OAAA;UAAA6C,QAAA,EAAKe,QAAQ,CAACC;QAAI;UAAAf,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACxBjD,OAAA;UAAA6C,QAAA,EAAIe,QAAQ,CAACE;QAAQ;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GAFrBW,QAAQ,CAACG,QAAQ;QAAAjB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAGtB,CACP;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAER,CAAC;AAEV,CAAC;AAACzC,EAAA,CAhGID,YAAsB;EAAA,QAGMZ,aAAa;AAAA;AAAAqE,EAAA,GAHzCzD,YAAsB;AAkG5B,eAAeA,YAAY;AAAC,IAAAyD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}